<link rel="stylesheet" href="Dash_css.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
<script src="new.js"></script>
{{>navBarL}}
<header class="jumbotron bg-secondary">
    <div class="container">
        <div class="row row-header">
            <div class="col-12 col-sm-6">
                <h1 class="display-4">Renting Management System</h1>
                <p class="lead">We take the Responsibility to Match each tenant with a Landlord!</p>
            </div>
            <div class="col-12 col-sm align-self-center">
                <img src="logof.png"height="100" width="250" >
            </div>
            <div class="col-12 col-sm align-self-center">
                <a role="button" id="createTenant" href="/landlord-createTenant" class="btn btn-block nav-link btn-warning bg-dark" style="color: #FFFFFF" data-toggle="modal">Create Tenant</a>
            </div>
        </div>
    </div>
</header>
<div class="container">
    <div class="row row-content align-items-center">
        <div class="col-12 col-sm-6 order-sm-last col-md-12">
            <div class="chart-container" style="position: relative; margin: auto ; height: 40vh;width: 50%">
                <canvas id="myChart" ></canvas>
            </div><script>
            var ctx = document.getElementById('myChart').getContext('2d');
            var myChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['BaseRent', 'Water', 'Electricity', 'Security', 'Maintenance'],
                    datasets: [{
                        data: [{{res.baseRent}}, {{res.water}}, {{res.electricity}}, {{res.security}}, {{res.maintenance}}],
                        backgroundColor: [
                            '#EA4335',
                            '#3c7ef1',
                            '#FBBC05',
                            '#34A853',
                            'rgb(130,65,217)'
                        ],
                        borderColor: [
                            'rgba(255, 99, 132, 1)',
                            'rgb(54,162,235)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    maintainAspectRatio:false,
                    responsive:true,
                    legend:{
                        display:true,
                        position:'left',
                        labels:{
                            fontSize:25,
                        },
                    },
                    title:{
                        display:true,
                        text:"Metric wise revenue",
                        fontSize:20
                    },
                }
            });
        </script>
        </div>

        <div class="col-12 col-sm-4 order-sm-last col-md-12">
            <div class="chart-container" style="position: relative; margin: auto ;height: 60vh;width: 80%">
                <canvas id="myChart2" ></canvas>
            </div><script>
            var ctx = document.getElementById('myChart2').getContext('2d');
            var myChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: [
                        {{#forEach ans}}
                            "{{this.month}}",
                        {{/forEach}}
                    ],
                    datasets: [{
                        label: 'Month Revenue',
                        data:  [
                            {{#forEach ans}}
                                "{{this.profit}}",
                            {{/forEach}}
                        ],
                        backgroundColor:"rgba(17,138,178,0.55)",
                        pointBackgroundColor:"#ee6c4d",
                        borderColor:"rgba(14,109,177,0.95)"
                    }]
                },
                options: {
                    legend:{
                        display:true,
                        position:'bottom',
                        labels:{
                            fontSize:25,
                        },
                    },
                    title:{
                        display:true,
                        text:"Month wise revenue",
                        fontSize:20
                    },
                    scales: {
                        yAxes: [{
                            ticks: {
                                callback: function(value, index, values) {
                                    return 'â‚¹' + value;
                                }
                            }
                        }]
                    },

                }
            });
        </script>
        </div>
    </div>

    <div class="row row-content align-items-center">
        <div class="col-sm-4 col-md-3">
            <h3 class="display-4">Rent Metric</h3>
        </div>
        <div class="col-sm col-md">
            <!--  <div class="table-wrapper-scroll-y my-custom-scrollbar"> -->
            <table class="table table-bordered table-striped mb-0 ">
                <thead class="bg-dark" style="color: floralwhite;">
                <tr>
                    <th scope="col">Sl.No</th>
                    <th scope="col">Metric Name</th>
                    <th scope="col">Rent (In Rs.)</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <th scope="row">1.</th>
                    <td class="lead">Base Rent</td>
                    <td class="lead">Rs {{baserent}}</td>
                </tr>
                <tr>
                    <th scope="row">2.</th>
                    <td class="lead">Water</td>
                    <td class="lead">Rs {{water}}</td>
                </tr>
                <tr>
                    <th scope="row">3.</th>
                    <td class="lead">Electricity</td>
                    <td class="lead">Rs {{electricity}} (per Unit)</td>
                </tr>
                <tr>
                    <th scope="row">4.</th>
                    <td class="lead">Security</td>
                    <td class="lead">Rs {{security}}</td>
                </tr>
                <tr>
                    <th scope="row">5.</th>
                    <td class="lead">Maintainance</td>
                    <td class="lead">Rs {{maintenance}}</td>
                </tr>
                </tbody>
            </table>
            <!-- </div> -->
            <center> <a name="SetNew" id="SetNew" class="btn btn-primary bg-dark" href="#" role="button">Set New</a> </center>
        </div>
    </div>

    <div class="container">
        <div class="row row-content align-items-center">
            <div class="col-12 col-sm-4 order-sm-last col-md-3">
                <h3 class="display-4">User Approvals</h3>
            </div>
            <div class="col col-sm order-sm-first col-md">
                <h4><span class="badge badge-dark lead">Pending Approvals </span> <span class="badge badge-dark lead">{{approvalcount}}</span></h4>
                <div class="table-wrapper-scroll-y my-custom-scrollbar">
                    <table class="table table-bordered table-striped mb-0">
                        <thead class="bg-dark" style="color: floralwhite;">
                        <tr>
                            <th scope="col">Tenant ID</th>
                            <th scope="col">Tenant Name</th>
                            <th scope="col">Action</th>
                        </tr>
                        </thead>
                        <tbody>
                        {{#unless aprov}}
                            <tr>
                                <td colspan="3" align="center">No pending approval</td>
                            </tr>
                        {{/unless}}
                        {{#each aprov}}
                            <tr>
                                <th scope="row">{{this.tenantID}}</th>
                                <td class="lead">{{this.fname}}</td>
                                <td align="center">
                                    <button type="button" value={{this.tenantID}} onclick="approve(this)" class="btn-primary-Action bg-dark" style="width: auto">Approve</button>
                                    <button type="button" value={{this.tenantID}} onclick="cancleapprove(this)" class="btn-primary-Action bg-danger" style="width: auto">Discard</button>
                                </td>
                            </tr>
                        {{/each}}

                        </tbody>
                    </table>
                </div>
                <center> <a name="ApproveAll" id="ApproveAll" class="btn btn-primary bg-dark" href="#" role="button">Approve All</a> <br>


                </center>
            </div>
        </div>


        {{>footerL}}